var intBL,intBR,intLT,intLB,intRT,intRB,raycaster=new THREE.Raycaster,oldRays=[];function arrEqual(e,a){if(e.length!=a.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!=a[t])return!1;return!0}function lookDirection(e){for(var a=0;a<stage.players.length;a++){var t,s=new THREE.Vector3,r=new THREE.Vector3,l=new THREE.Vector3,y=[],o=[];if(arrEqual(e,[1,0,0])){s.x=-1,s.y=0,s.z=0,r.x=stage.players[a].x-2*stage.players[a].width/5,r.y=stage.players[a].y-2*stage.players[a].height/5,r.z=stage.players[a].z,raycaster.set(r,s.normalize()),y=raycaster.intersectObjects(stage.blockAMeshes),l.x=stage.players[a].x-2*stage.players[a].width/5,l.y=stage.players[a].y+2*stage.players[a].height/5,l.z=stage.players[a].z,raycaster.set(l,s.normalize()),o=raycaster.intersectObjects(stage.blockAMeshes);var c=r;(g=new THREE.Vector3).addVectors(c,s.normalize().multiplyScalar(20)),drawRay(c,g,16711680);c=l;(g=new THREE.Vector3).addVectors(c,s.normalize().multiplyScalar(20)),drawRay(c,g,16711680)}else if(arrEqual(e,[-1,0,0])){s.x=1,s.y=0,s.z=0,r.x=stage.players[a].x+2*stage.players[a].width/5,r.y=stage.players[a].y-2*stage.players[a].height/5,r.z=stage.players[a].z,raycaster.set(r,s.normalize()),y=raycaster.intersectObjects(stage.blockAMeshes),l.x=stage.players[a].x+2*stage.players[a].width/5,l.y=stage.players[a].y+2*stage.players[a].height/5,l.z=stage.players[a].z,raycaster.set(l,s.normalize()),o=raycaster.intersectObjects(stage.blockAMeshes);c=r;(g=new THREE.Vector3).addVectors(c,s.normalize().multiplyScalar(20)),drawRay(c,g,65280);c=l;(g=new THREE.Vector3).addVectors(c,s.normalize().multiplyScalar(20)),drawRay(c,g,65280)}else if(arrEqual(e,[0,1,0])){s.x=0,s.y=-1,s.z=0,r.x=stage.players[a].x-2*stage.players[a].width/5,r.y=stage.players[a].y-2*stage.players[a].height/5,r.z=stage.players[a].z,raycaster.set(r,s.normalize()),y=raycaster.intersectObjects(stage.blockAMeshes),l.x=stage.players[a].x+2*stage.players[a].width/5,l.y=stage.players[a].y-2*stage.players[a].height/5,l.z=stage.players[a].z,raycaster.set(l,s.normalize()),o=raycaster.intersectObjects(stage.blockAMeshes);c=r;(g=new THREE.Vector3).addVectors(c,s.normalize().multiplyScalar(20)),drawRay(c,g,255);c=l;(g=new THREE.Vector3).addVectors(c,s.normalize().multiplyScalar(20)),drawRay(c,g,255)}else if(arrEqual(e,[0,-1,0])){s.x=0,s.y=1,s.z=0,r.x=stage.players[a].x-2*stage.players[a].width/5,r.y=stage.players[a].y+2*stage.players[a].height/5,r.z=stage.players[a].z,raycaster.set(r,s.normalize()),y=raycaster.intersectObjects(stage.blockAMeshes),l.x=stage.players[a].x+2*stage.players[a].width/5,l.y=stage.players[a].y+2*stage.players[a].height/5,l.z=stage.players[a].z,raycaster.set(l,s.normalize()),o=raycaster.intersectObjects(stage.blockAMeshes);c=r;(g=new THREE.Vector3).addVectors(c,s.normalize().multiplyScalar(20)),drawRay(c,g,16711935);var g;c=l;(g=new THREE.Vector3).addVectors(c,s.normalize().multiplyScalar(20)),drawRay(c,g,16711935)}null!=(t=determineClosest(y,o))&&t.length>0?(1==e[1]&&(stage.players[a].boxBelow=t[0].object),1==e[0]&&(stage.players[a].boxLeft=t[0].object),-1==e[0]&&(stage.players[a].boxRight=t[0].object),-1==e[1]&&("platform"!=t[0].object.userData.type?stage.players[a].boxAbove=t[0].object:stage.players[a].boxAbove=void 0)):(1==e[1]&&(stage.players[a].boxBelow=void 0),1==e[0]&&(stage.players[a].boxLeft=void 0),-1==e[0]&&(stage.players[a].boxRight=void 0),-1==e[1]&&(stage.players[a].boxAbove=void 0))}}function determineClosest(e,a){return e.length>0&&a.length>0?e[0].distance<a[0].distance?e:a:!(e.length>0)&&a.length>0?a:!(a.length>0)&&e.length>0?e:e.length>0||a.length>0?(console.log("none of these three cases exist"),e):void 0}function drawRay(e,a,t){}
