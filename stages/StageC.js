var stageC={init:function(){for(var t=Object.keys(stageProto),e=0;e<t.length;e++)this[t[e]]=charProto[t[e]];this.bgm="./sounds/My happy song Nicholas w lott.mp3",this.omega=omegaOn,this.blockA=iceBlock,this.blockB=waterBlock,this.blockC=woodBlock,this.snowing=!0,this.stageBlocks=[],this.blockAMeshes=[],this.stageHitBoxes=[],this.players=[],this.timer=0,this.timerIncrement=0,this.maxTim=180,this.minimumY=-80,this.maximumY=280,this.minimumX=-300,this.maximumX=300,this.player1SpawnX=-10,this.player1SpawnY=10,this.player1SpawnZ=0,this.player2SpawnX=10,this.player2SpawnY=10,this.player2SpawnZ=0,this.createScene(),omegaOn?this.populateOmega():this.populateScene(),this.player1=selectedPlayer1,this.player1.init(),this.player1.isPlayer1=!0,this.player1.setSpawn(),this.player2=selectedPlayer2,this.player2.init(),this.player2.setSpawn(),this.player2.isPlayer1=!1,createPlayer1(this.player1SpawnX,this.player1SpawnY,this.player1SpawnZ,this),createPlayer2(this.player2SpawnX,this.player2SpawnX,this.player2SpawnZ,this),this.player1.otherPlayer=this.player2,this.player2.otherPlayer=this.player1,this.player1.hitbbox=(new THREE.Box3).setFromObject(this.player1.hitBox),this.player2.hitbbox=(new THREE.Box3).setFromObject(this.player2.hitBox),this.createSpotLights(),this.startTimer()},createScene:function(){this.scene=new THREE.Scene,isDay?(noonLights(this.scene),$(document.getElementById("theBody")).css("color","black")):(nightLights(this.scene),$(document.getElementById("theBody")).css("color","white"))},populateScene:function(){console.log(this.blockA);for(var t=-10;t<11;t++)createBox(t*this.blockA.width,0,0,this.blockA,this),createBox(t*this.blockA.width,0,-1*this.blockA.width,this.blockA,this),createBox(t*this.blockA.width,0,-2*this.blockA.width,this.blockA,this),createBox(t*this.blockA.width,0,-3*this.blockA.width,this.blockA,this);for(t=-11;t>-40;t--)createBox(t*this.blockA.width,-1*this.blockA.width,-1*this.blockA.width,this.blockA,this),createBox(-1*t*this.blockA.width,-1*this.blockA.width,-1*this.blockA.width,this.blockA,this);createBox(0,-10.5*this.blockA.height,0,this.blockB,this);for(var e=-9;e<10;e+=3)for(var i=1;i<6;i++)createBox(e*this.blockC.height,i*this.blockC.height,-2*this.blockC.width,this.blockC,this);generateSnow()},populateOmega:function(){for(var t=-10;t<11;t++)createBox(t*this.blockA.width,0,0,this.blockA,this),createBox(t*this.blockA.width,0,-2*this.blockA.width,this.blockA,this);for(t=-40;t<40;t++)createBox(i*this.blockA.width,-1*this.blockA.width,-1*this.blockA.width,this.blockA,this);for(var e=1;e<5;e++)for(t=-10+e;t<11-e;t++){Math.random();createBox(t*this.blockA.width,-e*this.blockA.height,0,this.blockA,this)}for(var i=-9;i<10;i+=3)for(var s=1;s<6;s++)createBox(i*this.blockC.height,s*this.blockC.height,-2*this.blockC.width,this.blockC,this);generateSnow()},update:function(){if(countDown&&(document.getElementById("timerBox").innerHTML="Time: "+(this.maxTime-Math.floor(this.timer/60)),this.timer+=this.timerIncrement,this.maxTime-Math.floor(this.timer/60)==0&&(document.getElementById("timerBox").innerHTML="GO!",this.player1.canMove=!0,this.player2.canMove=!0,this.maxTime=180,this.timer=0,gameStarted=!0,countDown=!1)),!roundOver&&gameStarted){this.timer+=this.timerIncrement,document.getElementById("timerBox").innerHTML="Time: "+(this.maxTime-Math.floor(this.timer/60));for(var t=0;t<this.stageBlocks.length;t++)this.stageBlocks[t].update();this.maxTime-Math.floor(this.timer/60)==0&&(roundOver=!0)}for(let t=0;t<stage.players.length;t++)(stage.players[t].y>=stage.maximumY||stage.players[t].y<=stage.minimumY||stage.players[t].x>=stage.maximumX||stage.players[t].x<=stage.minimumX)&&(stage.players[t].y=10,stage.players[t].x=0,stage.players[t].xVel=0,stage.players[t].yVel=0,stage.players[t].stock-=1,stage.players[t].percentage=0);var e="";for(t=0;t<this.player1.stock;t++)e+="<i class='fas fa-heart' style='color:violet'></i> ";var i="";for(t=0;t<this.player2.stock;t++)i+="<i class='fas fa-heart' style='color:violet'></i> ";for(t=0;t<this.players.length;t++)this.players[t].percentage<40?isDay?color="black:":color="white":this.players[t].percentage<60?color="yellow":this.players[t].percentage<80?color="orange":color="red",0==t?player1Box.innerHTML="<div id = 'player1Name'>"+this.player1.name+"</div><div id = 'player1Stock'"+e+"</div><div id ='player1Percent' style = 'color: "+color+";'>"+this.player1.percentage+"%</div>":player2Box.innerHTML="<div id = 'player2Name'>"+this.player2.name+"</div><div id = 'player2Stock'"+i+"</div><div id ='player2Percent' style = 'color: "+color+";'>"+this.player2.percentage+"%</div>";0!=this.player1.stock&&0!=this.player2.stock||(roundOver=!0),roundOver&&(this.player1.canMove=!1,this.player2.canMove=!1,this.player1.stock>this.player2.stock?(document.getElementById("timerBox").innerHTML="GAME!<br>Player 1 Wins!",winner=1):this.player2.stock>this.player1.stock?(document.getElementById("timerBox").innerHTML="GAME!<br>Player 2 Wins!",winner=2):document.getElementById("timerBox").innerHTML="GAME!<br>It's a tie!")},startTimer:function(){this.timerIncrement=1,this.timer=0;var t=document.getElementById("container"),e=document.createElement("div");e.id="timerBox",e.innerHTML="Time: "+(this.maxTime-Math.floor(this.timer/60)),t.appendChild(e),countDown=!0,this.maxTime=3;var i=document.createElement("div");i.id="player1Box",i.innerHTML="<div id='player1Stock'>Stock: "+this.player1.stock+"</div><div id='player1Percent'>Percent: "+this.player1.percentage+"</div>",t.appendChild(i);var s=document.createElement("div");s.id="player2Box",s.innerHTML="<div id ='player2Stock'> Stock: "+this.player2.stock+"</div><div id ='player2Percent'>Percent: "+this.player2.percentage+"</div>",t.appendChild(s)},createSpotLights:function(){this.night&&createFollowSpotlights()}};
