var stageCBlock,perssonBlock,perssonTop,tayLorBlock,topMeshes=[],time=0;function stageSelectLoop(){if(controllersConnected&&stageSelectButtons(),time+=1,stageSelectCamera.lookAt(0,0,0),stageSelectCamera.position.set(0,800,0),isDay&&omegaOn?(document.getElementById("stageSelectBox").innerHTML="<div>Click a Stage!</div><div class = 'stageSelectInfo'>Time of Day: Day</div><div class = 'stageSelectInfo'>Mode: Omega</div>",document.getElementById("stageSelectBox").style.color="white"):isDay&&!omegaOn?(document.getElementById("stageSelectBox").innerHTML="<div>Click a Stage!</div><div class = 'stageSelectInfo'>Time of Day: Day</div><div class = 'stageSelectInfo'>Mode: Classic</div>",document.getElementById("stageSelectBox").style.color="white"):!isDay&&omegaOn?(document.getElementById("stageSelectBox").innerHTML="<div>Click a Stage!</div><div class = 'stageSelectInfo'>Time of Day: Night</div><div class = 'stageSelectInfo'>Mode: Omega</div>",document.getElementById("stageSelectBox").style.color="white"):(document.getElementById("stageSelectBox").innerHTML="<div>Click a Stage!</div><div class = 'stageSelectInfo'>Time of Day: Night</div><div class = 'stageSelectInfo'>Mode: Classic</div>",document.getElementById("stageSelectBox").style.color="white"),stageSelected){inStageSelect=!1,stageSelected=!1,HIGHLITED=void 0,selectableStages=[],topMeshes=[],initializeWorld();var e=document.getElementById("stageSelectBox");e.parentNode.removeChild(e)}else requestAnimationFrame(stageSelectLoop);renderer.render(mapScene,stageSelectCamera),raycaster.setFromCamera(mouse,stageSelectCamera);var t=raycaster.intersectObjects(selectableStages);t.length>0?HIGHLITED!=t[0].object&&(HIGHLITED&&HIGHLITED.material.emissive.setHex(HIGHLITED.currentHex),HIGHLITED=t[0].object,HIGHLITED.currentHex=HIGHLITED.material.emissive.getHex(),HIGHLITED.material.emissive.setHex(16711680),HIGHLITED.material.opacity=.8):(HIGHLITED&&(HIGHLITED.material.emissive.setHex(HIGHLITED.currentHex),HIGHLITED.material.opacity=.8),HIGHLITED=null)}function buildStageSelect(){inStageSelect=!0,time=0,mapScene=new THREE.Scene,stageSelectLightsDay(mapScene);var e=new THREE.BoxGeometry(500,10,500,1,1,1),t=new THREE.MeshPhongMaterial({color:16173719,map:(new THREE.TextureLoader).load("images/overviewmap2x.png")}),s=new THREE.Mesh(e,t);s.position.y-=10,mapScene.add(s);var a=new THREE.BoxGeometry(1e4,10,1e4,1,1,1),o=new THREE.MeshPhongMaterial({color:16173719,map:(new THREE.TextureLoader).load("images/mapbottom.png")}),n=new THREE.Mesh(a,o);n.position.y-=20,n.position.x-=2e3,n.position.z-=2e3,mapScene.add(n);var l=new THREE.TorusGeometry(10,2.5,2,12),i=new THREE.MeshPhongMaterial({color:52479,emissive:52479});(perssonBlock=new THREE.Mesh(l,i)).position.set(-75,10,-65),perssonBlock.rotation.set(1.57,0,0),mapScene.add(perssonBlock),perssonBlock.userData={stageData:stageA},selectableStages.push(perssonBlock),(perssonTop=new THREE.Mesh(new THREE.TetrahedronGeometry(6,0),new THREE.MeshPhongMaterial({color:52479,emissive:52479}))).position.set(-75,25,-65),perssonTop.rotation.set(0,0,0),mapScene.add(perssonTop),perssonTop.userData={stageData:stageA},selectableStages.push(perssonTop),topMeshes.push(perssonTop);var r=new THREE.TorusGeometry(15,3.75,2,12),c=new THREE.MeshPhongMaterial({color:52479,emissive:52479});(stageCBlock=new THREE.Mesh(r,c)).userData={stageData:stageB},mapScene.add(stageCBlock),stageCBlock.position.set(48,11,132),stageCBlock.scale.set(1,1,1),stageCBlock.rotation.set(1.57,0,0),selectableStages.push(stageCBlock),fieldOfDreamsTop=new THREE.Mesh(new THREE.TetrahedronGeometry(10,0),new THREE.MeshPhongMaterial({color:52479,emissive:52479})),fieldOfDreamsTop.position.set(48,25,132),mapScene.add(fieldOfDreamsTop),fieldOfDreamsTop.userData={stageData:stageB},selectableStages.push(fieldOfDreamsTop),topMeshes.push(fieldOfDreamsTop);var d=new THREE.TorusGeometry(15,3.75,2,12),g=new THREE.MeshPhongMaterial({color:52479,emissive:52479});(tayLorBlock=new THREE.Mesh(d,g)).userData={stageData:stageC},mapScene.add(tayLorBlock),tayLorBlock.position.set(-212,10,-151),tayLorBlock.scale.set(1,1,1),tayLorBlock.rotation.set(1.57,0,0),selectableStages.push(tayLorBlock),taylorTop=new THREE.Mesh(new THREE.TetrahedronGeometry(10,0),new THREE.MeshPhongMaterial({color:52479,emissive:52479})),taylorTop.position.set(-212,25,-151),mapScene.add(taylorTop),taylorTop.userData={stageData:stageC},selectableStages.push(taylorTop),topMeshes.push(taylorTop);var m=document.getElementById("container"),p=document.createElement("div");p.id="stageSelectBox",p.innerHTML="<div>Click a Stage!</div><div class = 'stageSelectInfo'>Time of Day: Day</div><div class = 'stageSelectInfo'>Mode: Omega</div>",m.appendChild(p),stageSelectLoop()}function stageSelectButtons(){(pressedButtons1[0]||pressedButtons2[0])&&time>10?(HIGHLITED=stageCBlock,selectedStage=HIGHLITED.userData,stageSelected=!0):(pressedButtons1[1]||pressedButtons2[1])&&time>10?(HIGHLITED=perssonBlock,selectedStage=HIGHLITED.userData,stageSelected=!0):(pressedButtons1[2]||pressedButtons2[2])&&time>10&&(HIGHLITED=tayLorBlock,selectedStage=HIGHLITED.userData,stageSelected=!0),(pressedButtons1[14]||pressedButtons2[14])&&time>10?omegaOn=!0:(pressedButtons1[15]||pressedButtons2[15])&&time>10?omegaOn=!1:(pressedButtons1[12]||pressedButtons2[12])&&time>10?isDay=!0:(pressedButtons1[13]||pressedButtons2[13])&&time>10&&(isDay=!1)}
